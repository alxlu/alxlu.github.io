<!doctype html><html lang="en"><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="stylesheet" href="/phenomic.browser.99256cd8d0b9bc2a366f.css" /><meta data-react-helmet="true" name="generator" content="Phenomic 0.17.12"/><meta data-react-helmet="true" property="og:site_name" content="alxlu-site"/><meta data-react-helmet="true" name="twitter:site" content="@"/><meta data-react-helmet="true" name="viewport" content="width=900"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Reselect Debugging"/><meta data-react-helmet="true" property="og:url" content="http://alx.lu/blog/reselect/"/><meta data-react-helmet="true" property="og:description" content="Reselect Debugging Reselect is very useful if you use Redux in your app. However, debugging it is sometimes difficult (at least as of this…"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Reselect Debugging"/><meta data-react-helmet="true" name="twitter:creator" content="@"/><meta data-react-helmet="true" name="twitter:description" content="Reselect Debugging Reselect is very useful if you use Redux in your app. However, debugging it is sometimes difficult (at least as of this…"/><meta data-react-helmet="true" name="description" content="Reselect Debugging Reselect is very useful if you use Redux in your app. However, debugging it is sometimes difficult (at least as of this…"/><title data-react-helmet="true">Reselect Debugging</title></head><body><div id="phenomic"><div class="_2Mf6m" data-reactid=".z3iegupzwg" data-react-checksum="-871497930"><div hidden="" data-reactid=".z3iegupzwg.0"><noscript data-reactid=".z3iegupzwg.0.0"></noscript><noscript data-reactid=".z3iegupzwg.0.1"></noscript><style data-reactid=".z3iegupzwg.0.2">@-ms-viewport { width: device-width; }</style></div><div class="_116Tm" data-reactid=".z3iegupzwg.1"><div data-reactid=".z3iegupzwg.1.0"><div class="_2bgXq" data-reactid=".z3iegupzwg.1.0.0"><div class="_1Jn-e" data-reactid=".z3iegupzwg.1.0.0.0"><div class="_3ImLx" data-reactid=".z3iegupzwg.1.0.0.0.0"></div><header class="_2gGRo" data-reactid=".z3iegupzwg.1.0.0.0.1"><div class="AAVqC" data-reactid=".z3iegupzwg.1.0.0.0.1.0">Back</div><nav class="_2frUm" data-reactid=".z3iegupzwg.1.0.0.0.1.1"><a class="Ezg15" href="/" data-reactid=".z3iegupzwg.1.0.0.0.1.1.0">Work</a><a class="Ezg15" href="/about" data-reactid=".z3iegupzwg.1.0.0.0.1.1.1">About</a><a class="Ezg15" href="/blog" data-reactid=".z3iegupzwg.1.0.0.0.1.1.2">Blog</a></nav></header><div class="_3ZG_i" data-reactid=".z3iegupzwg.1.0.0.0.2"></div></div></div><div class="KV-CR" data-reactid=".z3iegupzwg.1.0.1"><div class="sFWsg" data-reactid=".z3iegupzwg.1.0.1.0"><noscript data-reactid=".z3iegupzwg.1.0.1.0.0"></noscript><header class="_3lzwp" data-reactid=".z3iegupzwg.1.0.1.0.1"><time data-reactid=".z3iegupzwg.1.0.1.0.1.$2017-02-01T00=200=200=1000Z">Wed Feb 01 2017</time></header><div class="phenomic-BodyContainer" data-reactid=".z3iegupzwg.1.0.1.0.2"><h2 id="reselect-debugging"><a href="#reselect-debugging" class="phenomic-HeadingAnchor">#</a>Reselect Debugging</h2>
<p><a href="https://github.com/reactjs/reselect">Reselect</a> is very useful if you use Redux in your app.
However, debugging it is sometimes difficult (at least as of this blog post). This problem, is often
easily solved through the use of unit testing your selectors. That being said, sometimes you want to
make a quick change to try something out without having to go back and fix on your tests before
deciding if it’s the way you want to go. Redux itself has a very nice way to visualize the state
using the redux dev tools. We can load up the dev tools while in development mode.</p>
<p>To prevent excessive <code>console.log()</code>ing, I thought that it would be useful to be able to see how the
selectors looked using the <a href="https://github.com/gaearon/redux-devtools">Redux DevTools</a>. So, I
essentially decided to create a new reducer that only loads during development mode that will show
us how the selectors look after each state update.</p>
<p>To do this, we load our reducer asynchronously if we are in development mode. Each of its members
will be each one of the selectors that we want to check on. Using webpack, we can inject an
environment variable into our bundle that lets us determine what mode we are in.</p>
<p><code>webpack.config.babel.js</code></p>
<pre><code class="hljs language-JavaScript"><span class="hljs-comment">// imports section</span>
<span class="hljs-keyword">import</span> webpack <span class="hljs-keyword">from</span> <span class="hljs-string">'webpack'</span>;

<span class="hljs-comment">// inside your plugins section</span>
<span class="hljs-keyword">new</span> webpack.DefinePlugin({
    <span class="hljs-string">'process.env.NODE_ENV'</span>: <span class="hljs-built_in">JSON</span>.stringify(process.env.NODE_ENV || <span class="hljs-string">'development'</span>)
}),</code></pre>
<p>We want to update the reducer every time the state changes. This will be different for you depending
on how your project is set up. For my project, I am using something
<a href="https://github.com/redux-saga/redux-saga">redux-saga</a> to handle side effects and it happens to suit
this purpose well.</p>
<p>So to update the reducer, we simply create a new saga and import all of my selectors that we want to
add to the dev tools, and then export a generator function that listens for every single action that
fires. It will then pass the updated state into each of our selectors which will then update our
asynchronous reducer.</p>
<p><code>DevTools/reducer.js</code></p>
<pre><code class="hljs language-JavaScript"><span class="hljs-keyword">import</span> { UPDATE_SELECTORS_SUCCESS } <span class="hljs-keyword">from</span> <span class="hljs-string">'./constants'</span>;

<span class="hljs-keyword">const</span> initialState = {
  <span class="hljs-attr">selectors</span>: {},
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">state = initialState, action</span>) </span>{
  <span class="hljs-keyword">switch</span> (action.type) {
    <span class="hljs-keyword">case</span> UPDATE_SELECTORS_SUCCESS:
      <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">selectors</span>: action.payload };
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> state;
  }
}</code></pre>
<p><code>DevTools/actions.js</code></p>
<pre><code class="hljs language-JavaScript"><span class="hljs-keyword">import</span> { UPDATE_SELECTORS_SUCCESS } <span class="hljs-keyword">from</span> <span class="hljs-string">'./constants'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> updateSelectors = <span class="hljs-function">(<span class="hljs-params">payload</span>) =></span> ({ <span class="hljs-attr">type</span>: UPDATE_SELECTORS_SUCCESS, payload });</code></pre>
<p><code>DevTools/saga.js</code></p>
<pre><code class="hljs language-JavaScript"><span class="hljs-keyword">import</span> { put, take, select } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux-saga/effects'</span>;
<span class="hljs-keyword">import</span> { createSelector } <span class="hljs-keyword">from</span> <span class="hljs-string">'reselect'</span>;
<span class="hljs-keyword">import</span> { updateSelectors } <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>;

<span class="hljs-keyword">import</span> chartDataSelector <span class="hljs-keyword">from</span> <span class="hljs-string">'chartDataSelector'</span>;
<span class="hljs-keyword">import</span> dashboardSelector <span class="hljs-keyword">from</span> <span class="hljs-string">'dashboardSelector'</span>;
<span class="hljs-keyword">import</span> metricNameSelector <span class="hljs-keyword">from</span> <span class="hljs-string">'metricNameSelector'</span>;
<span class="hljs-keyword">import</span> userSelector <span class="hljs-keyword">from</span> <span class="hljs-string">'userSelector'</span>;
<span class="hljs-keyword">import</span> predictionSelector <span class="hljs-keyword">from</span> <span class="hljs-string">'predictionSelector'</span>;

<span class="hljs-keyword">const</span> selectors = [
  chartDataSelector,
  dashboardSelector,
  metricNameSelector,
  userSelector,
  predictionSelector,
].map(<span class="hljs-function"><span class="hljs-params">selector</span> =></span> ({ <span class="hljs-attr">name</span>: selector.name, <span class="hljs-attr">selector</span>: selector() }));

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">updateSelectorSaga</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">yield</span> take(<span class="hljs-string">'*'</span>);
      <span class="hljs-keyword">const</span> selectorsState = <span class="hljs-keyword">yield</span> select(createSelector(
        selectors.map(<span class="hljs-function"><span class="hljs-params">s</span> =></span> s.selector),
        (...results) => results.reduce(<span class="hljs-function">(<span class="hljs-params">o, result, idx</span>) =></span> ({
          ...o, [selectors[idx].name]: result,
        }), {})
      ));
      <span class="hljs-keyword">yield</span> put(updateSelectors(selectorsState));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.log(err);
      <span class="hljs-comment">// here we simply log any errors, although you could also consider putting the error into</span>
      <span class="hljs-comment">// the state.</span>
    }
  }
}</code></pre>
<p>We can use <code>import()</code> (or <code>System.import()</code> if you're on an older version of webpack) to load our
reducer and saga. This not only loads them asynchronously, but will cause webpack to <a href="https://webpack.js.org/guides/code-splitting-import/">split the
code</a> into a separate bundle so it doesn't
increase the size of your production build.</p>
<p><code>index.js</code></p>
<pre><code class="hljs language-JavaScript"><span class="hljs-comment">// with async/await and import()</span>
<span class="hljs-keyword">const</span> loadDevHelpers = <span class="hljs-keyword">async</span> () => {
  <span class="hljs-keyword">const</span> [devSagas, devReducer] = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'DevTools/saga'</span>),
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'DevTools/reducer'</span>),
  ]);
  injectAsyncReducer(store, <span class="hljs-string">'debug'</span>, devReducer.default);
  sagaMiddleware.run(devSagas.default);
};

<span class="hljs-comment">// or if you want to use Promises and System.import()</span>
<span class="hljs-keyword">const</span> loadDevHelpers = <span class="hljs-function"><span class="hljs-params">()</span> =></span> {
  <span class="hljs-built_in">Promise</span>.all([
    System.import(<span class="hljs-string">'DevTools/saga'</span>),
    System.import(<span class="hljs-string">'DevTools/reducer'</span>),
  ]).then(<span class="hljs-function">(<span class="hljs-params">[devSagas, devReducer]</span>) =></span> {
    injectAsyncReducer(store, <span class="hljs-string">'debug'</span>, devReducer.default);
    sagaMiddleware.run(devSagas.default);
  });
};

<span class="hljs-comment">// using Promises and System.import() (for older versions of webpack)</span>

<span class="hljs-keyword">if</span> (process.env.NODE_ENV !== <span class="hljs-string">'production'</span>) {
  loadDevHelpers();
}</code></pre>
<p>And that’s all we have to do to check on our selectors inside the redux dev tools. You’ll notice all
of the selectors that you have imported will now show up.</p>
<p><img src="/assets/devtools.png" alt="Redux DevTools"></p>
</div></div></div></div></div><footer class="_1Ustb" data-reactid=".z3iegupzwg.2"><p data-reactid=".z3iegupzwg.2.0">Alex Lu 2016</p></footer></div></div><script>window.__COLLECTION__ = [{"layout":"PageError","route":"404.html","description":"Content here not used, see src/layouts/PageError","__filename":"404.md","__url":"/404.html","__resourceUrl":"/404.html","__dataUrl":"/404.html.c51e41dcf93740dd221b7da7702623a9.json"},{"title":"ALX.LU Blog","layout":"About","description":"Hello Thanks for checking out my personal site! My name is Alex Lu and I graduated from UCLA with a BA in Design Media Arts in 2014. Over…","__filename":"about.md","__url":"/about/","__resourceUrl":"/about/index.html","__dataUrl":"/about/index.html.e5d82385e08c919e8cd83892259b3e00.json"},{"title":"ALX.LU Blog","layout":"Blog","description":"","__filename":"blog.md","__url":"/blog/","__resourceUrl":"/blog/index.html","__dataUrl":"/blog/index.html.12411be9dabe7ae3bef97a730ffcee5a.json"},{"title":"Hyperion.ai Deep Learning","date":"2017-03","layout":"BlogPost","redirect":"http://alx.lu/ml","description":"Please visit http&#x3A;//alx.lu/ml for writeup if you are not automatically redirected...","__filename":"blog/ml.md","__url":"/blog/ml/","__resourceUrl":"/blog/ml/index.html","__dataUrl":"/blog/ml/index.html.703bf9caa869b5bbe72aff8813170f95.json"},{"title":"Reselect Debugging","date":"2017-02","layout":"BlogPost","description":"Reselect Debugging Reselect is very useful if you use Redux in your app. However, debugging it is sometimes difficult (at least as of this…","__filename":"blog/reselect.md","__url":"/blog/reselect/","__resourceUrl":"/blog/reselect/index.html","__dataUrl":"/blog/reselect/index.html.aff14aa00589affb35140bc730c519bc.json"},{"title":"ALX.LU","layout":"Homepage","description":"","__filename":"index.md","__url":"/","__resourceUrl":"/index.html","__dataUrl":"/index.html.0634e8abd946eb39acc62acd030f92be.json"},{"layout":"PageLoading","description":"Content here not used, see src/layouts/PageLoading. This page is a demo for loading state. You can safely delete if you want.","__filename":"loading.md","__url":"/loading/","__resourceUrl":"/loading/index.html","__dataUrl":"/loading/index.html.195d4f0e5d27a11e56d8db059f891663.json"},{"title":"Adventus","subtitle":"3D Animation","date":"2012-09","layout":"Post","size":"small","image":"adventus.jpg","description":"Adventus Adventus is a short film that I directed. I got a group of classmates together to work on a the short. I was responsible for…","__filename":"work/adventus.md","__url":"/work/adventus/","__resourceUrl":"/work/adventus/index.html","__dataUrl":"/work/adventus/index.html.5123e34a47e5ad0cc1efcab1d05be5ef.json"},{"title":"Hyperion.ai Old","subtitle":"Startup","date":"2016-04","layout":"Post","size":"hidden","image":"hyperionai.jpg","description":"Hyperion.ai Hyperion.ai is the product of a startup I am currently the co-founder and CEO of. It is a custom multivitamin that improves…","__filename":"work/hyperionai-old.md","__url":"/work/hyperionai-old/","__resourceUrl":"/work/hyperionai-old/index.html","__dataUrl":"/work/hyperionai-old/index.html.42fb2d11731c977cbb3e75ced3bc7b44.json"},{"title":"Hyperion.ai","subtitle":"App","date":"2016-04","layout":"Post","size":"large","image":"hyperionai.jpg","description":"Hyperion.ai Hyperion.ai allows users to track any metric that they like over time. Nowadays, there are a ton of new health fads, diets,…","__filename":"work/hyperionai.md","__url":"/work/hyperionai/","__resourceUrl":"/work/hyperionai/index.html","__dataUrl":"/work/hyperionai/index.html.1b7ac47a95c3e08b8f17477e98d4fcf5.json"},{"title":"Meetup","subtitle":"HTML5 WebApp","date":"2013-04","layout":"Post","size":"small","image":"meetup.jpg","description":"Meetup App In the past ten years we have seen technology bring people together in a virtual space, Meetup attempts to do the opposite and…","__filename":"work/meetup.md","__url":"/work/meetup/","__resourceUrl":"/work/meetup/index.html","__dataUrl":"/work/meetup/index.html.c427e4777e0350e722995314722c56cd.json"},{"title":"Microsoft","subtitle":"Program Management","date":"2016-02","layout":"Post","size":"large","image":"microsoft.jpg","description":"Microsoft My first full time job out of college was a Program Manager position at Microsoft. I was part of the Web Platform team working on…","__filename":"work/microsoft.md","__url":"/work/microsoft/","__resourceUrl":"/work/microsoft/index.html","__dataUrl":"/work/microsoft/index.html.fe780ab0123f5337db0c950e145cd251.json"},{"title":"NASA Jet Propulsion Lab","subtitle":"Internship","date":"2013-06","layout":"Post","size":"small","image":"nasa.jpg","description":"NASA Jet Propulsion Lab Internship I started at NASA Jet Propulsion Lab as one of the summer interns. I had my internship extended for the…","__filename":"work/nasa.md","__url":"/work/nasa/","__resourceUrl":"/work/nasa/index.html","__dataUrl":"/work/nasa/index.html.3df0a0ce58c3ddefb3cfba7fcdbae134.json"},{"title":"Pixar","subtitle":"Internship","date":"2011-09","layout":"Post","size":"small","image":"pixar.jpg","description":"Pixar Undergraduate Program Jessie Paint Building Explosion Created using Houdini's PyroFX and Pixar's in-house rigid body simulator. The…","__filename":"work/pixar.md","__url":"/work/pixar/","__resourceUrl":"/work/pixar/index.html","__dataUrl":"/work/pixar/index.html.aa9fbaf16deb4899be7fbd8cd7061230.json"},{"title":"Project Alpha","subtitle":"Unity3d Game","date":"2013-04","layout":"Post","size":"small","image":"projectalpha.jpg","description":"Project Alpha Project Alpha is an RTS game in that was in its early stages of development using the Unity3d game engine. We have ceased…","__filename":"work/projectalpha.md","__url":"/work/projectalpha/","__resourceUrl":"/work/projectalpha/index.html","__dataUrl":"/work/projectalpha/index.html.f537ff9f51ddc643cb3a95e7daa4d283.json"},{"title":"SlideApp","subtitle":"HTML5 WebApp","date":"2014-09","layout":"Post","size":"small","image":"slideapp.jpg","description":"SlideApp SlideApp is a webapp I started as a side-project over the 2013 winter break. I wanted to both try and create something that could…","__filename":"work/slideapp.md","__url":"/work/slideapp/","__resourceUrl":"/work/slideapp/index.html","__dataUrl":"/work/slideapp/index.html.5dcb607dc8a5931f1439452679eedf4a.json"},{"title":"Tizen","subtitle":"Hackathon Project","date":"2013-12","layout":"Post","size":"large","image":"tizen.jpg","description":"Tizen Hackathon Project Hackathon This game was the submission Jonathan Solichin and I entered in a hackathon sponsored by BeMyApp, and…","__filename":"work/tizen.md","__url":"/work/tizen/","__resourceUrl":"/work/tizen/index.html","__dataUrl":"/work/tizen/index.html.1fa58b7bf049173646ecd3fc857d0ef0.json"},{"title":"vuPad","subtitle":"Creative Direction","date":"2013-04","layout":"Post","size":"small","image":"vupad.jpg","description":"Creative Direction at vuPad I joined a startup called vuPad, a furniture visualization company. The app we created allows users to…","__filename":"work/vupad.md","__url":"/work/vupad/","__resourceUrl":"/work/vupad/index.html","__dataUrl":"/work/vupad/index.html.7dceb2694a649439e8bdc9dbaf880f8b.json"}];window.__INITIAL_STATE__ = {"pages":{"/blog/reselect/":{"head":{"title":"Reselect Debugging","date":"2017-02","layout":"BlogPost","description":"Reselect Debugging Reselect is very useful if you use Redux in your app. However, debugging it is sometimes difficult (at least as of this…"},"body":"<h2 id=\"reselect-debugging\"><a href=\"#reselect-debugging\" class=\"phenomic-HeadingAnchor\">#</a>Reselect Debugging</h2>\n<p><a href=\"https://github.com/reactjs/reselect\">Reselect</a> is very useful if you use Redux in your app.\nHowever, debugging it is sometimes difficult (at least as of this blog post). This problem, is often\neasily solved through the use of unit testing your selectors. That being said, sometimes you want to\nmake a quick change to try something out without having to go back and fix on your tests before\ndeciding if it’s the way you want to go. Redux itself has a very nice way to visualize the state\nusing the redux dev tools. We can load up the dev tools while in development mode.</p>\n<p>To prevent excessive <code>console.log()</code>ing, I thought that it would be useful to be able to see how the\nselectors looked using the <a href=\"https://github.com/gaearon/redux-devtools\">Redux DevTools</a>. So, I\nessentially decided to create a new reducer that only loads during development mode that will show\nus how the selectors look after each state update.</p>\n<p>To do this, we load our reducer asynchronously if we are in development mode. Each of its members\nwill be each one of the selectors that we want to check on. Using webpack, we can inject an\nenvironment variable into our bundle that lets us determine what mode we are in.</p>\n<p><code>webpack.config.babel.js</code></p>\n<pre><code class=\"hljs language-JavaScript\"><span class=\"hljs-comment\">// imports section</span>\n<span class=\"hljs-keyword\">import</span> webpack <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'webpack'</span>;\n\n<span class=\"hljs-comment\">// inside your plugins section</span>\n<span class=\"hljs-keyword\">new</span> webpack.DefinePlugin({\n    <span class=\"hljs-string\">'process.env.NODE_ENV'</span>: <span class=\"hljs-built_in\">JSON</span>.stringify(process.env.NODE_ENV || <span class=\"hljs-string\">'development'</span>)\n}),</code></pre>\n<p>We want to update the reducer every time the state changes. This will be different for you depending\non how your project is set up. For my project, I am using something\n<a href=\"https://github.com/redux-saga/redux-saga\">redux-saga</a> to handle side effects and it happens to suit\nthis purpose well.</p>\n<p>So to update the reducer, we simply create a new saga and import all of my selectors that we want to\nadd to the dev tools, and then export a generator function that listens for every single action that\nfires. It will then pass the updated state into each of our selectors which will then update our\nasynchronous reducer.</p>\n<p><code>DevTools/reducer.js</code></p>\n<pre><code class=\"hljs language-JavaScript\"><span class=\"hljs-keyword\">import</span> { UPDATE_SELECTORS_SUCCESS } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./constants'</span>;\n\n<span class=\"hljs-keyword\">const</span> initialState = {\n  <span class=\"hljs-attr\">selectors</span>: {},\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">state = initialState, action</span>) </span>{\n  <span class=\"hljs-keyword\">switch</span> (action.type) {\n    <span class=\"hljs-keyword\">case</span> UPDATE_SELECTORS_SUCCESS:\n      <span class=\"hljs-keyword\">return</span> { ...state, <span class=\"hljs-attr\">selectors</span>: action.payload };\n    <span class=\"hljs-keyword\">default</span>:\n      <span class=\"hljs-keyword\">return</span> state;\n  }\n}</code></pre>\n<p><code>DevTools/actions.js</code></p>\n<pre><code class=\"hljs language-JavaScript\"><span class=\"hljs-keyword\">import</span> { UPDATE_SELECTORS_SUCCESS } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./constants'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> updateSelectors = <span class=\"hljs-function\">(<span class=\"hljs-params\">payload</span>) =></span> ({ <span class=\"hljs-attr\">type</span>: UPDATE_SELECTORS_SUCCESS, payload });</code></pre>\n<p><code>DevTools/saga.js</code></p>\n<pre><code class=\"hljs language-JavaScript\"><span class=\"hljs-keyword\">import</span> { put, take, select } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'redux-saga/effects'</span>;\n<span class=\"hljs-keyword\">import</span> { createSelector } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'reselect'</span>;\n<span class=\"hljs-keyword\">import</span> { updateSelectors } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./actions'</span>;\n\n<span class=\"hljs-keyword\">import</span> chartDataSelector <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'chartDataSelector'</span>;\n<span class=\"hljs-keyword\">import</span> dashboardSelector <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'dashboardSelector'</span>;\n<span class=\"hljs-keyword\">import</span> metricNameSelector <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'metricNameSelector'</span>;\n<span class=\"hljs-keyword\">import</span> userSelector <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'userSelector'</span>;\n<span class=\"hljs-keyword\">import</span> predictionSelector <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'predictionSelector'</span>;\n\n<span class=\"hljs-keyword\">const</span> selectors = [\n  chartDataSelector,\n  dashboardSelector,\n  metricNameSelector,\n  userSelector,\n  predictionSelector,\n].map(<span class=\"hljs-function\"><span class=\"hljs-params\">selector</span> =></span> ({ <span class=\"hljs-attr\">name</span>: selector.name, <span class=\"hljs-attr\">selector</span>: selector() }));\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>* <span class=\"hljs-title\">updateSelectorSaga</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>) {\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-keyword\">yield</span> take(<span class=\"hljs-string\">'*'</span>);\n      <span class=\"hljs-keyword\">const</span> selectorsState = <span class=\"hljs-keyword\">yield</span> select(createSelector(\n        selectors.map(<span class=\"hljs-function\"><span class=\"hljs-params\">s</span> =></span> s.selector),\n        (...results) => results.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">o, result, idx</span>) =></span> ({\n          ...o, [selectors[idx].name]: result,\n        }), {})\n      ));\n      <span class=\"hljs-keyword\">yield</span> put(updateSelectors(selectorsState));\n    } <span class=\"hljs-keyword\">catch</span> (err) {\n      <span class=\"hljs-built_in\">console</span>.log(err);\n      <span class=\"hljs-comment\">// here we simply log any errors, although you could also consider putting the error into</span>\n      <span class=\"hljs-comment\">// the state.</span>\n    }\n  }\n}</code></pre>\n<p>We can use <code>import()</code> (or <code>System.import()</code> if you're on an older version of webpack) to load our\nreducer and saga. This not only loads them asynchronously, but will cause webpack to <a href=\"https://webpack.js.org/guides/code-splitting-import/\">split the\ncode</a> into a separate bundle so it doesn't\nincrease the size of your production build.</p>\n<p><code>index.js</code></p>\n<pre><code class=\"hljs language-JavaScript\"><span class=\"hljs-comment\">// with async/await and import()</span>\n<span class=\"hljs-keyword\">const</span> loadDevHelpers = <span class=\"hljs-keyword\">async</span> () => {\n  <span class=\"hljs-keyword\">const</span> [devSagas, devReducer] = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-built_in\">Promise</span>.all([\n    <span class=\"hljs-keyword\">import</span>(<span class=\"hljs-string\">'DevTools/saga'</span>),\n    <span class=\"hljs-keyword\">import</span>(<span class=\"hljs-string\">'DevTools/reducer'</span>),\n  ]);\n  injectAsyncReducer(store, <span class=\"hljs-string\">'debug'</span>, devReducer.default);\n  sagaMiddleware.run(devSagas.default);\n};\n\n<span class=\"hljs-comment\">// or if you want to use Promises and System.import()</span>\n<span class=\"hljs-keyword\">const</span> loadDevHelpers = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =></span> {\n  <span class=\"hljs-built_in\">Promise</span>.all([\n    System.import(<span class=\"hljs-string\">'DevTools/saga'</span>),\n    System.import(<span class=\"hljs-string\">'DevTools/reducer'</span>),\n  ]).then(<span class=\"hljs-function\">(<span class=\"hljs-params\">[devSagas, devReducer]</span>) =></span> {\n    injectAsyncReducer(store, <span class=\"hljs-string\">'debug'</span>, devReducer.default);\n    sagaMiddleware.run(devSagas.default);\n  });\n};\n\n<span class=\"hljs-comment\">// using Promises and System.import() (for older versions of webpack)</span>\n\n<span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">'production'</span>) {\n  loadDevHelpers();\n}</code></pre>\n<p>And that’s all we have to do to check on our selectors inside the redux dev tools. You’ll notice all\nof the selectors that you have imported will now show up.</p>\n<p><img src=\"/assets/devtools.png\" alt=\"Redux DevTools\"></p>\n","__filename":"blog/reselect.md","__url":"/blog/reselect/","__resourceUrl":"/blog/reselect/index.html","__dataUrl":"/blog/reselect/index.html.aff14aa00589affb35140bc730c519bc.json","type":"BlogPost"}}}</script><script data-react-helmet="true" src="https://cdn.polyfill.io/v2/polyfill.min.js"></script><script src="/phenomic.browser.99256cd8d0b9bc2a366f.js"></script></body></html>