(function(){function m(){requestAnimationFrame(m)}function n(a,c,e,b,d){this.name=a;this.ix=c;this.iy=e;this.width=b;this.height=d;this.x=c;this.y=e;this.current=void 0;this.fwidth=b.slice(0,-1)/100*window.innerWidth;this.fheight=d.slice(0,-1)/100*window.innerHeight;this.draggable=!1;this.inner=void 0;this.textprompt=this.bodytext="";this.blinker="<span class='blink'>&#x02588</span>"}function p(a,c,e){this.userprompt="<span style='color: #ff0000'>pilot</span><span style='color: #fff000'>@</span><span style='color: #e54bdc'>x-47b</span><span style='color: #4be568'>.remote</span>:~$ ";
this.fakeinputs=a;this.responses=c;this.loc=0;this.attatchedWindow=e}function t(){q=!0;r=setInterval(function(){f.loc==f.fakeinputs.length&&clearInterval(r);g||f.advance()},150)}function u(a){console.log(b);q||t();b.forEach(function(a){a.update();a.updateSize();a.movable(h,mouseY);console.log(a.draggable)})}function v(a){b.forEach(function(a){a.draggable&&(a.draggable=!1)});document.getElementById("map-canvas").style.pointerEvents="auto"}function w(a){h=a.clientX;mouseY=a.clientY;b.forEach(function(a){a.draggable&&
(document.getElementById("map-canvas").style.pointerEvents="none",a.current.style.top=mouseY-10,a.current.style.left=h-window.innerWidth*(a.width.slice(0,-1)/100)/2)})}function x(a){g||f.advance();32==a.which&&(console.log("spacebar"),document.body.innerHTML="")}var f,h=mouseY=0,s,b=[],y=[].concat.apply([],["./x-47b -launch -F ".split(""),"</br>","test command yeah".split(""),"</br>","wut lol".split("")]),k,g=!1,r,q=!1,l=!1,z=document.getElementById("cssDiv");navigator.geolocation.getCurrentPosition(function(a){console.log(a.coords.latitude,
a.coords.longitude)},function(){console.log("no location")});(function(){var a=new XMLHttpRequest;a.open("GET","ui.html",!1);a.send(null);z.innerHTML=a.responseText})();n.prototype={init:function(){this.current=document.createElement("div");this.current.id=this.name;this.current.className="floatwindow";this.current.style.width=this.width;this.current.style.height=this.height;var a=document.createElement("div");a.id="consolefill";a.className="floatwindow";var c=document.createElement("div");c.className=
"contentfill";var e=document.createElement("div");e.className="window consolecontent";var b=document.createElement("div");b.style.position="absolute";b.style.width="100%";var d=document.createElement("p");d.style.textAlign="center";d.style.marginTop=".3vw";d.style.fontSize=".6vw";d.style.userSelect="none";d.style.pointerEvents="none";d.innerHTML=this.name;this.inner=document.createElement("p");this.inner.id="consoleText";this.inner.style.position="absolute";this.inner.style.left="4%";this.inner.style.top=
"2%";e.appendChild(c);e.appendChild(this.inner);b.appendChild(d);this.current.appendChild(a);this.current.appendChild(e);this.current.appendChild(b);document.body.appendChild(this.current);this.current.style.top=0.01*this.iy.slice(0,-1)*window.innerHeight;this.current.style.left=0.01*this.ix.slice(0,-1)*window.innerWidth},update:function(){this.x=parseFloat(this.current.style.left.slice(0,-2));this.y=parseFloat(this.current.style.top.slice(0,-2))},updateSize:function(){this.fwidth=this.width.slice(0,
-1)/100*window.innerWidth;this.fheight=this.height.slice(0,-1)/100*window.innerHeight},pos:function(){return{x:this.x,y:this.y}},movable:function(a,c){if(this.x+this.fwidth>a&&a>this.x&&this.y+0.065*this.fheight>c&&c>this.y)return this.draggable=!0,this.current.style.zIndex=2,!0;this.current.style.zIndex=1;return this.draggable=!1},getSize:function(){return[this.fwidth,this.fheight]},updateText:function(a){this.inner.innerHTML=this.inner.innerHTML.slice(0,-1*(this.blinker.length-7));this.inner.innerHTML+=
a;this.inner.innerHTML+=this.blinker},truncateBlinker:function(){this.inner.innerHTML=this.inner.innerHTML.slice(0,-1*(this.blinker.length-7))},move:function(){console.log("wat")},test:function(){console.log("sup")}};p.prototype={advance:function(){var a="";if(0>=this.fakeinputs[this.loc].length){this.attatchedWindow.updateText("</br>");g=!0;a+=this.responses.shift();0!=this.responses.length?a+="</br>"+this.userprompt:l=!0;var c=this.reply,b=this.attatchedWindow;setTimeout(function(){c(a,b)},1500);
this.loc++;return""}a+=this.fakeinputs[this.loc].shift();this.attatchedWindow.updateText(a)},reply:function(a,c){console.log(this.attatchedWindow);c.updateText(a);l?(c.truncateBlinker(),l=!0):g=!1},init:function(){this.attatchedWindow.updateText("Welcome to the X-47B Console</br>Last login: "+new Date+"</br>");this.attatchedWindow.updateText(this.userprompt)}};(function(){console.log(y);var a={center:new google.maps.LatLng(-34.379,150.644),zoom:8,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.HYBRID};
k=new google.maps.Map(document.getElementById("map-canvas"),a);console.log(k);k.setZoom(8);s=new n("Terminal","22%","50%","37%","40%");b.push(s);b.forEach(function(a){a.move();a.init();a.update();a.updateSize()});a=[[].concat.apply([],["source x-47b_controls.sh".split("")]),[].concat.apply([],["x-47b -target 457.78 89.787".split("")]),[].concat.apply([],["x-47b -launch -F".split("")]),[].concat.apply([],["x-47b -beginflight".split("")])];f=new p(a,[["x-47b control script loaded... </br> ready for commands."],
["target location set to 457.78 89.787."],["launching... </br>done!"],["moving towards target..."]],b[0]);f.init();window.addEventListener("mousemove",w,!1);window.addEventListener("mousedown",u,!1);window.addEventListener("mouseup",v,!1);window.addEventListener("keypress",x,!1)})();m()})();
